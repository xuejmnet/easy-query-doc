import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,e as t}from"./app-e990d651.js";const p={},o=t(`<p>并不是简单的查询判断是否存在,如果不存在就更新,存在就更新或者忽略,而是实现了数据库对应的方言实现数据库自身的功能,如果要使用此功能建议升级到<code>1.10.41+</code></p><h2 id="支持的db" tabindex="-1"><a class="header-anchor" href="#支持的db" aria-hidden="true">#</a> 支持的db</h2><table><thead><tr><th>数据库名称</th><th>包名</th><th>是否支持</th></tr></thead><tbody><tr><td>MySQL</td><td>sql-mysql</td><td>✅</td></tr><tr><td>PostgresSQL</td><td>sql-pgsql</td><td>✅</td></tr><tr><td>SqlServer</td><td>sql-mssql</td><td>✅</td></tr><tr><td>H2</td><td>sql-h2</td><td>✅</td></tr><tr><td>达梦dameng</td><td>sql-dameng</td><td>✅</td></tr><tr><td>人大金仓KingbaseES</td><td>sql-kingbase-es</td><td>✅</td></tr><tr><td>Oracle</td><td>sql-oracle</td><td>✅</td></tr><tr><td>SQLite</td><td>sql-sqlite</td><td>❌</td></tr></tbody></table><h2 id="onconflictthen" tabindex="-1"><a class="header-anchor" href="#onconflictthen" aria-hidden="true">#</a> onConflictThen</h2><ul><li>第一个参数表示要更新的列,如果传入null则表示存在就忽略</li><li>第二个参数表示指定存在的约束判断支持多列(mysql不支持指定所以设置了也无效)</li></ul><h2 id="存在就忽略不更新" tabindex="-1"><a class="header-anchor" href="#存在就忽略不更新" aria-hidden="true">#</a> 存在就忽略不更新</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">TopicAuto</span> topicAuto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicAuto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setStars</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span> <span class="token operator">+</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertNull</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> l <span class="token operator">=</span> defaultEasyEntityQuery<span class="token punctuation">.</span><span class="token function">insertable</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onConflictThen</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">executeRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">MERGE</span> <span class="token constant">INTO</span> <span class="token string">&quot;t_topic_auto&quot;</span> t1 <span class="token constant">USING</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;create_time&quot;</span> <span class="token class-name">FROM</span> <span class="token constant">DUAL</span> <span class="token punctuation">)</span> t2 <span class="token constant">ON</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token constant">WHEN</span> <span class="token constant">NOT</span> <span class="token constant">MATCHED</span> <span class="token class-name">THEN</span> <span class="token constant">INSERT</span> <span class="token punctuation">(</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span>t2<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="指定存在的条件" tabindex="-1"><a class="header-anchor" href="#指定存在的条件" aria-hidden="true">#</a> 指定存在的条件</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">TopicAuto</span> topicAuto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicAuto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setStars</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span> <span class="token operator">+</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertNull</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> l <span class="token operator">=</span> defaultEasyEntityQuery<span class="token punctuation">.</span><span class="token function">insertable</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onConflictThen</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>o<span class="token operator">-&gt;</span>o<span class="token punctuation">.</span><span class="token constant">FETCHER</span><span class="token punctuation">.</span><span class="token function">stars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">executeRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">MERGE</span> <span class="token constant">INTO</span> <span class="token string">&quot;t_topic_auto&quot;</span> t1 <span class="token constant">USING</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;create_time&quot;</span> <span class="token class-name">FROM</span> <span class="token constant">DUAL</span> <span class="token punctuation">)</span> t2 <span class="token constant">ON</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span> <span class="token constant">AND</span> t1<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token constant">WHEN</span> <span class="token constant">NOT</span> <span class="token constant">MATCHED</span> <span class="token class-name">THEN</span> <span class="token constant">INSERT</span> <span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span>t2<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="存在就更新" tabindex="-1"><a class="header-anchor" href="#存在就更新" aria-hidden="true">#</a> 存在就更新</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//存在就更新stars和title</span>
<span class="token class-name">TopicAuto</span> topicAuto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicAuto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setStars</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span> <span class="token operator">+</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertNull</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> l <span class="token operator">=</span> defaultEasyEntityQuery<span class="token punctuation">.</span><span class="token function">insertable</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onConflictThen</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token constant">FETCHER</span><span class="token punctuation">.</span><span class="token function">stars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">executeRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">MERGE</span> <span class="token constant">INTO</span> <span class="token string">&quot;t_topic_auto&quot;</span> t1 <span class="token constant">USING</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;create_time&quot;</span> <span class="token class-name">FROM</span> <span class="token constant">DUAL</span> <span class="token punctuation">)</span> t2 <span class="token constant">ON</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token constant">WHEN</span> <span class="token constant">MATCHED</span> <span class="token constant">THEN</span> <span class="token constant">UPDATE</span> <span class="token constant">SET</span> t1<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span>t1<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span> <span class="token constant">WHEN</span> <span class="token constant">NOT</span> <span class="token constant">MATCHED</span> <span class="token class-name">THEN</span> <span class="token constant">INSERT</span> <span class="token punctuation">(</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span>t2<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="存在就更新-1" tabindex="-1"><a class="header-anchor" href="#存在就更新-1" aria-hidden="true">#</a> 存在就更新</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//存在就更新stars和title</span>
<span class="token class-name">TopicAuto</span> topicAuto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicAuto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setStars</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span> <span class="token operator">+</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertNull</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> l <span class="token operator">=</span> defaultEasyEntityQuery<span class="token punctuation">.</span><span class="token function">insertable</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onConflictThen</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token constant">FETCHER</span><span class="token punctuation">.</span><span class="token function">stars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">executeRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">MERGE</span> <span class="token constant">INTO</span> <span class="token string">&quot;t_topic_auto&quot;</span> t1 <span class="token constant">USING</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;create_time&quot;</span> <span class="token class-name">FROM</span> <span class="token constant">DUAL</span> <span class="token punctuation">)</span> t2 <span class="token constant">ON</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token constant">WHEN</span> <span class="token constant">MATCHED</span> <span class="token constant">THEN</span> <span class="token constant">UPDATE</span> <span class="token constant">SET</span> t1<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span>t1<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span> <span class="token constant">WHEN</span> <span class="token constant">NOT</span> <span class="token constant">MATCHED</span> <span class="token class-name">THEN</span> <span class="token constant">INSERT</span> <span class="token punctuation">(</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span>t2<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span>


<span class="token comment">//存在就更新所有列除了主键和指定约束键</span>
<span class="token class-name">TopicAuto</span> topicAuto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicAuto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setStars</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span> <span class="token operator">+</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
topicAuto<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertNull</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> l <span class="token operator">=</span> defaultEasyEntityQuery<span class="token punctuation">.</span><span class="token function">insertable</span><span class="token punctuation">(</span>topicAuto<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onConflictThen</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token constant">FETCHER</span><span class="token punctuation">.</span><span class="token function">allFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">executeRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">MERGE</span> <span class="token constant">INTO</span> <span class="token string">&quot;t_topic_auto&quot;</span> t1 <span class="token constant">USING</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token operator">?</span> <span class="token constant">AS</span> <span class="token string">&quot;create_time&quot;</span> <span class="token class-name">FROM</span> <span class="token constant">DUAL</span> <span class="token punctuation">)</span> t2 <span class="token constant">ON</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token constant">WHEN</span> <span class="token constant">MATCHED</span> <span class="token constant">THEN</span> <span class="token constant">UPDATE</span> <span class="token constant">SET</span> t1<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span>t1<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span>t1<span class="token punctuation">.</span><span class="token string">&quot;create_time&quot;</span> <span class="token operator">=</span> t2<span class="token punctuation">.</span><span class="token string">&quot;create_time&quot;</span> <span class="token constant">WHEN</span> <span class="token constant">NOT</span> <span class="token constant">MATCHED</span> <span class="token class-name">THEN</span> <span class="token constant">INSERT</span> <span class="token punctuation">(</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span>t2<span class="token punctuation">.</span><span class="token string">&quot;stars&quot;</span><span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span>t2<span class="token punctuation">.</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="相关搜索" tabindex="-1"><a class="header-anchor" href="#相关搜索" aria-hidden="true">#</a> 相关搜索</h2><p><code>存在更新</code> <code>存在忽略</code> <code>MERGE INTO</code> <code>onDuplicateKeyIgnore</code> <code>onDuplicateKeyUpdate</code> <code>onConflictDoNothing</code> <code>onConflictDoUpdate</code></p>`,15),c=[o];function e(u,l){return s(),a("div",null,c)}const r=n(p,[["render",e],["__file","insertOrUpdate.html.vue"]]);export{r as default};
