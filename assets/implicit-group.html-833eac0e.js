import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as p,c as o,b as c,f as n}from"./app-62c3bd85.js";const e={},u=n('<p><code>隐式Group</code>又称为<code>ManyJoin</code>用来处理ORM在OLAP领域的最后一块短板,可以说这个功能是目前现有orm都不存在的一个功能</p><ul><li>体验和隐式子查询一样</li><li>多条件自动合并到隐式group中</li><li>智能处理多个表之前的join关系</li></ul><div class="hint-container tip"><p class="hint-container-title">体验!!!</p><blockquote><p>隐式子查询的体验,和高性能的sql生成,谁说鱼和熊掌不可兼得！！！！！</p></blockquote></div><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> api</h2><p><code>manyJoin</code>将对象关系<code>XToMany</code>转成<code>join</code>来实现高效的查询</p><p><code>manyJoin(true,o-&gt;o.many(),query-&gt;query.where(x-&gt;x.name().like(&quot;123&quot;)))</code></p><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>condition</td><td>boolean</td><td>用来控制是否将子查询转成<code>隐式Group</code></td></tr><tr><td>manyPropColumn</td><td>expression</td><td>返回需要将哪个子查询转成<code>隐式Group</code></td></tr><tr><td>adapter</td><td>expression</td><td>对子查询进行增强相当于是对子查询额外添加条件</td></tr></tbody></table>',7),l=n(`<h2 id="普通隐式子查询" tabindex="-1"><a class="header-anchor" href="#普通隐式子查询" aria-hidden="true">#</a> 普通隐式子查询</h2><p>各个条件的判断导致子查询独立,所以在性能上面会导致性能很低下并且很多时候一个子查询无法解决多个条件组合所以会需要多个子查询相互配合才可以</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
easyEntityQuery<span class="token punctuation">.</span><span class="token function">queryable</span><span class="token punctuation">(</span><span class="token class-name">DocUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token operator">--</span> 第<span class="token number">1</span>条sql数据
<span class="token constant">SELECT</span>
    t<span class="token punctuation">.</span>\`id\`<span class="token punctuation">,</span>
    t<span class="token punctuation">.</span>\`name\`<span class="token punctuation">,</span>
    t<span class="token punctuation">.</span>\`phone\`<span class="token punctuation">,</span>
    t<span class="token punctuation">.</span>\`age\` 
<span class="token constant">FROM</span>
    \`doc_user\` t 
<span class="token class-name">WHERE</span>
    <span class="token function">IFNULL</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">SELECT</span>
        <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token function">CAST</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>\`code\` <span class="token class-name">AS</span> <span class="token constant">SIGNED</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token constant">FROM</span>
        \`doc_bank_card\` t1 
    <span class="token constant">WHERE</span>
        t1<span class="token punctuation">.</span>\`uid\` <span class="token operator">=</span> t<span class="token punctuation">.</span>\`id\` 
        <span class="token constant">AND</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;123&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">123</span> 
    <span class="token class-name">AND</span> <span class="token function">IFNULL</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">SELECT</span>
        <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token function">CAST</span><span class="token punctuation">(</span>t3<span class="token punctuation">.</span>\`code\` <span class="token class-name">AS</span> <span class="token constant">SIGNED</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token constant">FROM</span>
        \`doc_bank_card\` t3 
    <span class="token constant">WHERE</span>
        t3<span class="token punctuation">.</span>\`uid\` <span class="token operator">=</span> t<span class="token punctuation">.</span>\`id\` 
        <span class="token constant">AND</span> t3<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;123&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">456</span> 
    <span class="token class-name">AND</span> <span class="token function">IFNULL</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">SELECT</span>
        <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token function">CAST</span><span class="token punctuation">(</span>t5<span class="token punctuation">.</span>\`code\` <span class="token class-name">AS</span> <span class="token constant">SIGNED</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token constant">FROM</span>
        \`doc_bank_card\` t5 
    <span class="token constant">WHERE</span>
        t5<span class="token punctuation">.</span>\`uid\` <span class="token operator">=</span> t<span class="token punctuation">.</span>\`id\` 
        <span class="token constant">AND</span> t5<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;456&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">789</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="manyjoin隐式group" tabindex="-1"><a class="header-anchor" href="#manyjoin隐式group" aria-hidden="true">#</a> manyJoin隐式group</h2><p>使用<code>manyJoin</code>后,框架会识别各个子查询将其合并到一起,<code>eq</code>会足够的智能将多个子查询合并到一起让编写复杂sql变得极其容易</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>easyEntityQuery<span class="token punctuation">.</span><span class="token function">queryable</span><span class="token punctuation">(</span><span class="token class-name">DocUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">manyJoin</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token operator">--</span> 第<span class="token number">1</span>条sql数据
<span class="token constant">SELECT</span>
    t<span class="token punctuation">.</span>\`id\`<span class="token punctuation">,</span>
    t<span class="token punctuation">.</span>\`name\`<span class="token punctuation">,</span>
    t<span class="token punctuation">.</span>\`phone\`<span class="token punctuation">,</span>
    t<span class="token punctuation">.</span>\`age\` 
<span class="token constant">FROM</span>
    \`doc_user\` t 
<span class="token class-name">LEFT</span> <span class="token constant">JOIN</span>
    <span class="token punctuation">(</span>
        <span class="token constant">SELECT</span>
            t1<span class="token punctuation">.</span>\`uid\`<span class="token punctuation">,</span>
            <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> 
                <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;123&#39;</span> <span class="token class-name">THEN</span> <span class="token function">CAST</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>\`code\` <span class="token class-name">AS</span> <span class="token constant">SIGNED</span><span class="token punctuation">)</span> 
                <span class="token constant">ELSE</span> <span class="token number">0</span> 
            <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__sum2__\`<span class="token punctuation">,</span>
            <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> 
                <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;456&#39;</span> <span class="token class-name">THEN</span> <span class="token function">CAST</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>\`code\` <span class="token class-name">AS</span> <span class="token constant">SIGNED</span><span class="token punctuation">)</span> 
                <span class="token constant">ELSE</span> <span class="token number">0</span> 
            <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__sum3__\` 
        <span class="token constant">FROM</span>
            \`doc_bank_card\` t1 
        <span class="token constant">GROUP</span> <span class="token constant">BY</span>
            t1<span class="token punctuation">.</span>\`uid\`
    <span class="token punctuation">)</span> t2 
        <span class="token constant">ON</span> t2<span class="token punctuation">.</span>\`uid\` <span class="token operator">=</span> t<span class="token punctuation">.</span>\`id\` 
<span class="token constant">WHERE</span>
    t2<span class="token punctuation">.</span>\`__sum2__\` <span class="token operator">=</span> <span class="token number">123</span> 
    <span class="token constant">AND</span> t2<span class="token punctuation">.</span>\`__sum2__\` <span class="token operator">=</span> <span class="token number">456</span> 
    <span class="token constant">AND</span> t2<span class="token punctuation">.</span>\`__sum3__\` <span class="token operator">=</span> <span class="token number">789</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="manyjoin带条件" tabindex="-1"><a class="header-anchor" href="#manyjoin带条件" aria-hidden="true">#</a> manyJoin带条件</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>

easyEntityQuery<span class="token punctuation">.</span><span class="token function">queryable</span><span class="token punctuation">(</span><span class="token class-name">DocUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">manyJoin</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">//可作用于非manyJoin普通子查询也可以受用</span>
        <span class="token punctuation">.</span><span class="token function">manyConfigure</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bcq <span class="token operator">-&gt;</span> bcq<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//支持隐式join和普通属性筛选</span>
            x<span class="token punctuation">.</span><span class="token function">bank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;银行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string">&quot;45678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token operator">--</span> 第<span class="token number">1</span>条sql数据
<span class="token constant">SELECT</span>
    t<span class="token punctuation">.</span>\`id\`<span class="token punctuation">,</span>
    t<span class="token punctuation">.</span>\`name\`<span class="token punctuation">,</span>
    t<span class="token punctuation">.</span>\`phone\`<span class="token punctuation">,</span>
    t<span class="token punctuation">.</span>\`age\` 
<span class="token constant">FROM</span>
    \`doc_user\` t 
<span class="token class-name">LEFT</span> <span class="token constant">JOIN</span>
    <span class="token punctuation">(</span>
        <span class="token constant">SELECT</span>
            t1<span class="token punctuation">.</span>\`uid\`<span class="token punctuation">,</span>
            <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> 
                <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;123&#39;</span> <span class="token class-name">THEN</span> <span class="token function">CAST</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>\`code\` <span class="token class-name">AS</span> <span class="token constant">SIGNED</span><span class="token punctuation">)</span> 
                <span class="token constant">ELSE</span> <span class="token number">0</span> 
            <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__sum2__\`<span class="token punctuation">,</span>
            <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> 
                <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;456&#39;</span> <span class="token class-name">THEN</span> <span class="token function">CAST</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>\`code\` <span class="token class-name">AS</span> <span class="token constant">SIGNED</span><span class="token punctuation">)</span> 
                <span class="token constant">ELSE</span> <span class="token number">0</span> 
            <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__sum3__\` 
        <span class="token constant">FROM</span>
            \`doc_bank_card\` t1 
        <span class="token constant">LEFT</span> <span class="token constant">JOIN</span>
            \`doc_bank\` t2 
                <span class="token constant">ON</span> t2<span class="token punctuation">.</span>\`id\` <span class="token operator">=</span> t1<span class="token punctuation">.</span>\`bank_id\` 
        <span class="token constant">WHERE</span>
            t2<span class="token punctuation">.</span>\`name\` <span class="token operator">=</span> <span class="token char">&#39;银行&#39;</span> 
            <span class="token constant">AND</span> t1<span class="token punctuation">.</span>\`type\` <span class="token constant">LIKE</span> &#39;<span class="token operator">%</span><span class="token number">45678</span><span class="token operator">%</span>&#39; 
        <span class="token constant">GROUP</span> <span class="token constant">BY</span>
            t1<span class="token punctuation">.</span>\`uid\`
    <span class="token punctuation">)</span> t3 
        <span class="token constant">ON</span> t3<span class="token punctuation">.</span>\`uid\` <span class="token operator">=</span> t<span class="token punctuation">.</span>\`id\` 
<span class="token constant">WHERE</span>
    t3<span class="token punctuation">.</span>\`__sum2__\` <span class="token operator">=</span> <span class="token number">123</span> 
    <span class="token constant">AND</span> t3<span class="token punctuation">.</span>\`__sum2__\` <span class="token operator">=</span> <span class="token number">456</span> 
    <span class="token constant">AND</span> t3<span class="token punctuation">.</span>\`__sum3__\` <span class="token operator">=</span> <span class="token number">789</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="manyjoin排序查询" tabindex="-1"><a class="header-anchor" href="#manyjoin排序查询" aria-hidden="true">#</a> manyJoin排序查询</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Draft3</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> 银行 <span class="token operator">=</span> easyEntityQuery<span class="token punctuation">.</span><span class="token function">queryable</span><span class="token punctuation">(</span><span class="token class-name">DocUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">manyJoin</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bcq <span class="token operator">-&gt;</span> bcq<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//支持隐式join和普通属性筛选</span>
            x<span class="token punctuation">.</span><span class="token function">bank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;银行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string">&quot;45678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                    <span class="token function">max</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> <span class="token class-name">Select</span><span class="token punctuation">.</span><span class="token constant">DRAFT</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
                user<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                        <span class="token function">sum</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                        <span class="token function">min</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token operator">--</span> 第<span class="token number">1</span>条sql数据
<span class="token constant">SELECT</span>
    t<span class="token punctuation">.</span>\`id\` <span class="token constant">AS</span> \`value1\`<span class="token punctuation">,</span>
    t3<span class="token punctuation">.</span>\`__sum2__\` <span class="token constant">AS</span> \`value2\`<span class="token punctuation">,</span>
    t3<span class="token punctuation">.</span>\`__min5__\` <span class="token constant">AS</span> \`value3\` 
<span class="token constant">FROM</span>
    \`doc_user\` t 
<span class="token class-name">LEFT</span> <span class="token constant">JOIN</span>
    <span class="token punctuation">(</span>
        <span class="token constant">SELECT</span>
            t1<span class="token punctuation">.</span>\`uid\`<span class="token punctuation">,</span>
            <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> 
                <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;123&#39;</span> <span class="token class-name">THEN</span> <span class="token function">CAST</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>\`code\` <span class="token class-name">AS</span> <span class="token constant">SIGNED</span><span class="token punctuation">)</span> 
                <span class="token constant">ELSE</span> <span class="token number">0</span> 
            <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__sum2__\`<span class="token punctuation">,</span>
            <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> 
                <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;456&#39;</span> <span class="token class-name">THEN</span> <span class="token function">CAST</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>\`code\` <span class="token class-name">AS</span> <span class="token constant">SIGNED</span><span class="token punctuation">)</span> 
                <span class="token constant">ELSE</span> <span class="token number">0</span> 
            <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__sum3__\`<span class="token punctuation">,</span>
            <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> 
                <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;123&#39;</span> <span class="token constant">THEN</span> t1<span class="token punctuation">.</span>\`code\` 
                <span class="token constant">ELSE</span> <span class="token keyword">null</span> 
            <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__max4__\`<span class="token punctuation">,</span>
            <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> 
                <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token char">&#39;123&#39;</span> <span class="token constant">THEN</span> t1<span class="token punctuation">.</span>\`code\` 
                <span class="token constant">ELSE</span> <span class="token keyword">null</span> 
            <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__min5__\` 
        <span class="token constant">FROM</span>
            \`doc_bank_card\` t1 
        <span class="token constant">LEFT</span> <span class="token constant">JOIN</span>
            \`doc_bank\` t2 
                <span class="token constant">ON</span> t2<span class="token punctuation">.</span>\`id\` <span class="token operator">=</span> t1<span class="token punctuation">.</span>\`bank_id\` 
        <span class="token constant">WHERE</span>
            t2<span class="token punctuation">.</span>\`name\` <span class="token operator">=</span> <span class="token char">&#39;银行&#39;</span> 
            <span class="token constant">AND</span> t1<span class="token punctuation">.</span>\`type\` <span class="token constant">LIKE</span> &#39;<span class="token operator">%</span><span class="token number">45678</span><span class="token operator">%</span>&#39; 
        <span class="token constant">GROUP</span> <span class="token constant">BY</span>
            t1<span class="token punctuation">.</span>\`uid\`
    <span class="token punctuation">)</span> t3 
        <span class="token constant">ON</span> t3<span class="token punctuation">.</span>\`uid\` <span class="token operator">=</span> t<span class="token punctuation">.</span>\`id\` 
<span class="token constant">WHERE</span>
    t3<span class="token punctuation">.</span>\`__sum2__\` <span class="token operator">=</span> <span class="token number">123</span> 
    <span class="token constant">AND</span> t3<span class="token punctuation">.</span>\`__sum2__\` <span class="token operator">=</span> <span class="token number">456</span> 
    <span class="token constant">AND</span> t3<span class="token punctuation">.</span>\`__sum3__\` <span class="token operator">=</span> <span class="token number">789</span> 
<span class="token constant">ORDER</span> <span class="token constant">BY</span>
    t3<span class="token punctuation">.</span>\`__sum2__\` <span class="token constant">ASC</span><span class="token punctuation">,</span>
    t3<span class="token punctuation">.</span>\`__max4__\` <span class="token constant">DESC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="案例3" tabindex="-1"><a class="header-anchor" href="#案例3" aria-hidden="true">#</a> 案例3</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
easyEntityQuery<span class="token punctuation">.</span><span class="token function">queryable</span><span class="token punctuation">(</span><span class="token class-name">DocUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">manyJoin</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> o<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">likeMatchLeft</span><span class="token punctuation">(</span><span class="token string">&quot;400&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> <span class="token class-name">Select</span><span class="token punctuation">.</span><span class="token constant">DRAFT</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
                user<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x<span class="token operator">-&gt;</span>x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;工商&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x<span class="token operator">-&gt;</span>x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;建设&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                user<span class="token punctuation">.</span><span class="token function">bankCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>x<span class="token operator">-&gt;</span>x<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;农业&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token constant">SELECT</span> t<span class="token punctuation">.</span>\`id\` <span class="token constant">AS</span> \`value1\`<span class="token punctuation">,</span>t2<span class="token punctuation">.</span>\`__count3__\` <span class="token constant">AS</span> \`value2\`<span class="token punctuation">,</span>t2<span class="token punctuation">.</span>\`__count4__\` <span class="token constant">AS</span> \`value3\`<span class="token punctuation">,</span>t2<span class="token punctuation">.</span>\`__count5__\` <span class="token constant">AS</span> \`value4\` <span class="token constant">FROM</span> \`doc_user\` t <span class="token class-name">LEFT</span> <span class="token constant">JOIN</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> t1<span class="token punctuation">.</span>\`uid\`<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token constant">CASE</span> <span class="token class-name">WHEN</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`code\` <span class="token constant">LIKE</span> <span class="token operator">?</span> <span class="token constant">THEN</span> <span class="token operator">?</span> <span class="token constant">ELSE</span> <span class="token operator">?</span> <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token constant">THEN</span> <span class="token constant">TRUE</span> <span class="token constant">ELSE</span> <span class="token class-name">FALSE</span> <span class="token constant">END</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__any2__\`<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token operator">?</span> <span class="token constant">THEN</span> <span class="token operator">?</span> <span class="token constant">ELSE</span> <span class="token operator">?</span> <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__count3__\`<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token operator">?</span> <span class="token constant">THEN</span> <span class="token operator">?</span> <span class="token constant">ELSE</span> <span class="token operator">?</span> <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__count4__\`<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CASE</span> <span class="token constant">WHEN</span> t1<span class="token punctuation">.</span>\`type\` <span class="token operator">=</span> <span class="token operator">?</span> <span class="token constant">THEN</span> <span class="token operator">?</span> <span class="token constant">ELSE</span> <span class="token operator">?</span> <span class="token constant">END</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">AS</span> \`__count5__\` <span class="token constant">FROM</span> \`doc_bank_card\` t1 <span class="token constant">GROUP</span> <span class="token constant">BY</span> t1<span class="token punctuation">.</span>\`uid\`<span class="token punctuation">)</span> t2 <span class="token constant">ON</span> t2<span class="token punctuation">.</span>\`uid\` <span class="token operator">=</span> t<span class="token punctuation">.</span>\`id\` <span class="token constant">WHERE</span> t2<span class="token punctuation">.</span>\`__any2__\` <span class="token operator">=</span> <span class="token operator">?</span>
<span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token class-name">Parameters</span><span class="token operator">:</span> <span class="token number">400</span><span class="token operator">%</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">1</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>工商<span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">1</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>建设<span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">1</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>农业<span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">1</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">)</span>
<span class="token operator">&lt;=</span><span class="token operator">=</span> <span class="token class-name">Time</span> <span class="token class-name">Elapsed</span><span class="token operator">:</span> <span class="token function">6</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,12);function i(k,r){const s=t("Mermaid");return p(),o("div",null,[u,c(s,{id:"mermaid-86",code:"eJxLLXLJTEwvSszlUgACF39nJ0c/b2fHIBeFarAICASHBHn6uStkpigEeKMLlgJF3TBEk/NTUtHFSioLMMSSEvOyPeEG1IJJmENCg12DiHREXmIuhtEFGfl5CEFPvxBXd6B5iekQMVSrQH4m1apaLowQq83X1a2pgbvdSkHJNzGvUrckX9c/L1VBAxRUj9omAc3VVMKjF+wYdL3QgIJrBwClCWsH"}),l])}const m=a(e,[["render",i],["__file","implicit-group.html.vue"]]);export{m as default};
