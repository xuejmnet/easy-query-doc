import{_ as s,W as n,X as a,a0 as p}from"./framework-7a1bedf3.js";const t={},e=p(`<h1 id="新增" tabindex="-1"><a class="header-anchor" href="#新增" aria-hidden="true">#</a> 新增</h1><p><code>EasyQuery</code>提供了单条插入和批量插入数据的方法,可以返回数据库执行插入后的受影响行数。</p><p>数据库建表脚本</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> t_topic
<span class="token punctuation">(</span>
    id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;主键ID&#39;</span><span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    stars <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;点赞数&#39;</span><span class="token punctuation">,</span>
    title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;标题&#39;</span><span class="token punctuation">,</span>
    create_time <span class="token keyword">datetime</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;创建时间&#39;</span>
<span class="token punctuation">)</span><span class="token keyword">comment</span> <span class="token string">&#39;主题表&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>java实体对象</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span><span class="token string">&quot;t_topic&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Topic</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@PrimaryKey</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> stars<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Topic</span><span class="token punctuation">&gt;</span></span> topics <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Topic</span> topic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Topic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    topic<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    topic<span class="token punctuation">.</span><span class="token function">setStars</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    topic<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;标题&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    topic<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">plusDays</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    topics<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-单条插入" tabindex="-1"><a class="header-anchor" href="#_1-单条插入" aria-hidden="true">#</a> 1.单条插入</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">long</span> rows <span class="token operator">=</span> easyQuery<span class="token punctuation">.</span><span class="token function">insertable</span><span class="token punctuation">(</span>topics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//返回结果rows为1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-log line-numbers-mode" data-ext="log"><pre class="language-log"><code>插入sql：INSERT INTO t_topic <span class="token operator">(</span>\`id\`<span class="token punctuation">,</span>\`stars\`<span class="token punctuation">,</span>\`title\`<span class="token punctuation">,</span>\`create_time\`<span class="token operator">)</span> VALUES <span class="token operator">(</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token operator">)</span> 
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Preparing<span class="token operator">:</span> INSERT INTO t_topic <span class="token operator">(</span>\`id\`<span class="token punctuation">,</span>\`stars\`<span class="token punctuation">,</span>\`title\`<span class="token punctuation">,</span>\`create_time\`<span class="token operator">)</span> VALUES <span class="token operator">(</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token operator">)</span> 
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">0</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">0</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-16T</span><span class="token time number">21:34:13.287</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">&lt;</span><span class="token operator">=</span><span class="token operator">=</span> Total<span class="token operator">:</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果当前数据表为自增id那么会回填对应的数据到id主键里面(后续会支持)</p><h2 id="_2-多条插入" tabindex="-1"><a class="header-anchor" href="#_2-多条插入" aria-hidden="true">#</a> 2.多条插入</h2><p>批量插入需要jdbc链接字符串开启<code>&amp;allowMultiQueries=true&amp;rewriteBatchedStatements=true</code>开启后性能将会大幅提升</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">long</span> rows <span class="token operator">=</span> easyQuery<span class="token punctuation">.</span><span class="token function">insertable</span><span class="token punctuation">(</span>topics<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//返回结果rows为10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-log line-numbers-mode" data-ext="log"><pre class="language-log"><code><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Preparing<span class="token operator">:</span> INSERT INTO t_topic <span class="token operator">(</span>\`id\`<span class="token punctuation">,</span>\`stars\`<span class="token punctuation">,</span>\`title\`<span class="token punctuation">,</span>\`create_time\`<span class="token operator">)</span> VALUES <span class="token operator">(</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token operator">)</span> 
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">0</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">0</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-16T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">1</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">1</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-17T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">2</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">2</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-18T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">3</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">3</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-19T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">4</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">104</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">4</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-20T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">5</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">105</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">5</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-21T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">6</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">106</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">6</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-22T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">7</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">107</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">7</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-23T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">8</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">108</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">8</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-24T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">9</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">109</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">9</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-25T</span><span class="token time number">21:38:22.114</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">&lt;</span><span class="token operator">=</span><span class="token operator">=</span> Total<span class="token operator">:</span> <span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-链式添加" tabindex="-1"><a class="header-anchor" href="#_3-链式添加" aria-hidden="true">#</a> 3,链式添加</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">long</span> rows <span class="token operator">=</span> easyQuery<span class="token punctuation">.</span><span class="token function">insertable</span><span class="token punctuation">(</span>topics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>topics<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//返回结果rows为2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-log line-numbers-mode" data-ext="log"><pre class="language-log"><code><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Preparing<span class="token operator">:</span> INSERT INTO t_topic <span class="token operator">(</span>\`id\`<span class="token punctuation">,</span>\`stars\`<span class="token punctuation">,</span>\`title\`<span class="token punctuation">,</span>\`create_time\`<span class="token operator">)</span> VALUES <span class="token operator">(</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token operator">)</span> 
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">0</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">0</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-16T</span><span class="token time number">21:42:12.542</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters<span class="token operator">:</span> <span class="token number">1</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token operator">(</span>Integer<span class="token operator">)</span><span class="token punctuation">,</span>标题<span class="token number">1</span><span class="token operator">(</span>String<span class="token operator">)</span><span class="token punctuation">,</span><span class="token date number">2023-03-17T</span><span class="token time number">21:42:12.542</span><span class="token operator">(</span>LocalDateTime<span class="token operator">)</span>
<span class="token operator">&lt;</span><span class="token operator">=</span><span class="token operator">=</span> Total<span class="token operator">:</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),o=[e];function c(r,l){return n(),a("div",null,o)}const k=s(t,[["render",c],["__file","insert.html.vue"]]);export{k as default};
