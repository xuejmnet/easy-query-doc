---
title: eqv2å‡çº§v3ğŸ”¥
order: 90
---

eqv2ç‰ˆæœ¬å·²ç»å°†ä¸»è¦æ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å¼€å‘å®Œæ¯•,ç”¨æˆ·å¦‚æœä¸æƒ³å‡çº§å¯ä»¥ç»§ç»­ä½¿ç”¨v2ï¼Œä¸”bugä¾ç„¶ä¼šä¿®å¤

ä¸ºäº†æ¡†æ¶æ›´å¥½æ›´ç¨³å®šçš„å‘å±•,ä¸æºç çš„é˜…è¯»å’Œå¯ç»´æŠ¤æ€§,ä½œè€…æ‰“ç®—å¯¹v2ç‰ˆæœ¬å¤§åˆ€é˜”æ–§çš„è¿›è¡Œä¿®æ”¹(ä¹‹å‰æ˜¯ä»¥åŠŸèƒ½ä½œä¸ºç¬¬ä¸€ä¼˜å…ˆè¿›è¡Œå¼€å‘æ¯•ç«Ÿä½œè€…è‡ªå·±ä¹Ÿè¦ç”¨),ä¸€æ–¹é¢æ˜¯å› ä¸ºå†å²åŸå› å¯¼è‡´easy-queryçš„api4jæ¨¡å—å’Œapi4ktæ¨¡å—å ç”¨å¤§é‡ç±»ç›®å¯¼è‡´entityä¸‹ä¸å¾—ä¸å–å…¶ä»–ç±»å,
å¦ä¸€æ–¹é¢è¿‡å¤šçš„apié€‰æ‹©è®©ä¸ä½†è®©ä½œè€…ç²¾åŠ›åˆ†æ•£å¹¶ä¸”ä¹Ÿè¦ç”¨æˆ·æœ‰æ›´å¤šçš„è¯¯è§£å’Œé€‰æ‹©å›°éš¾,æ‰€ä»¥v2å‡çº§åˆ°v3æœ‰å¦‚ä¸‹breakchange

## BreakChange


## é…ç½®é¡¹é»˜è®¤å€¼å˜åŠ¨

é…ç½®é¡¹  | v2é»˜è®¤å€¼  | v3é»˜è®¤å€¼
---  | --- | --- 
propertyMode  | FIRST_LOWER | SAME_AS_ENTITY 
mappingStrategy  | COLUMN_ONLY | PROPERTY_FIRST 
sharding  | - | false  

## 3.0.3ç ´åæ€§å˜æ›´

æ–°å¢å±æ€§

é…ç½®é¡¹  | v2é»˜è®¤å€¼  | v3é»˜è®¤å€¼
---  | --- | --- 
sharding  | - | false  

`EntityExpressionExecutor`é»˜è®¤å®ç°`DefaultEntityExpressionExecutor`ä¸å†æ”¯æŒåˆ†ç‰‡,å¦‚æœéœ€è¦å®ç°åˆ†ç‰‡è¯·æ›¿æ¢å®ç°ä¸º`ShardingEntityExpressionExecutor`
å¹¶ä¸”ä¼˜åŒ–`DefaultEntityExpressionExecutor`å†…éƒ¨é€»è¾‘


## é»˜è®¤ç§»é™¤keepNativeStyle
æ¡†æ¶é»˜è®¤ä½¿ç”¨keepStyleå°†åŸç”Ÿsqlç‰‡æ®µå•å¼•å·å˜æˆåŒå•å¼•å·å¦‚æœä¸éœ€è¦å¯ä»¥ä½¿ç”¨messageFormatå‡½æ•°æ¥ç¦ç”¨

### ç§»é™¤api4j
v3ç‰ˆæœ¬å°†é‡å¿ƒæ”¾åˆ°entityæ¨¡å¼,é¡¾`User::getName`è¿™ç§æ–¹å¼ä¸å†æ¨è,æ‰€ä»¥api4jåŒ…ç›´æ¥ç§»é™¤,é‚£ä¹ˆå¦‚æœç”¨æˆ·æƒ³ç”¨api4jå¹¶ä¸”æƒ³å‡çº§åˆ°v3æ€ä¹ˆåŠ,ç”¨æˆ·å¯ä»¥ç‹¬ç«‹æ‹‰å–v2æºç ä¸‹çš„`sql-api4j`ç„¶åå•ç‹¬å¼•å…¥v3çš„`sql-core`åŒ…åšç›¸å…³é€‚é…

### ç§»é™¤api4kt
åŸå› åŒä¸Š


### ç§»é™¤è¿‡æœŸapi
ç§»é™¤å¸¦æœ‰`@Deprecated`æ ‡è®°çš„è¿‡æœŸapi,ç”¨æˆ·å¯ä»¥æ ¹æ®æºç æç¤ºè¿ç§»åˆ°æ–°ç‰ˆæœ¬apiåå†å‡çº§
- `GroupKeys.TABLE1.....N`
- `QueryStrategy`ã€`ProxyEntityOnDuplicateKeyUpdate`ã€`SQLOnDuplicateKeyIgnore`æ¥å£
- `queryLargeColumn`æ–¹æ³•
- `@Column`ä¸‹çš„`large`å±æ€§
- `exists`æ”¹æˆ`table.expression().exists`
- `notExists`æ”¹æˆ`table.expression().notExists`
- `valueOrDefault`ã€`fetchBy`ã€`selectSum`ã€`selectAvg`ã€`selectMax`ã€`selectMin`ã€`trimStart`ã€`trimEnd`ã€`plus+TimeUnit`ã€`duration+DateTimeDurationEnum`ã€`sqlType`
- `SQLParameter`ã€`SQLConstantExpression`ã€`join`ã€`sqlType`ã€`sqlType`ã€`sqlType`ã€`sqlType`ã€`sqlType`
- `fetchBy`ã€`keepNativeStyle`



## ç±»ã€æ¥å£å˜åŠ¨

v2  | v3  
---  | --- 
SQLExpression1....11  | SQLActionExpression1....11
ColumnFunctionCompareComparableStringChainExpression  | StringTypeExpression
ColumnFunctionCompareComparableNumberChainExpression  | NumberTypeExpression
ColumnFunctionCompareComparableDateTimeChainExpression  | DateTimeTypeExpression
ColumnFunctionCompareComparableBooleanChainExpression  | BooleanTypeExpression
ColumnFunctionCompareComparableAnyChainExpression  | AnyTypeExpression
ColumnFunctionCompareComparablePartitionByChainExpression  | PartitionByTypeExpression
ColumnFunctionCompareComparableJsonMapChainExpression  | JsonMapTypeExpression
SQLExpression1....11  | SQLActionExpression1....11

